<?php
// $Id$

/**
 * @file
 * This module sets up basic mapping for events/tours/dates
 * It creates some map views and enables blocks in default locations
 */

/**
 * Implementation of hook_menu().
 */
function sonybmg_events_map_menu() {
  $items = array();

  $items['admin/settings/eventmap'] = array(
    'title' => 'Event Map',
    'page callback' => 'sonybmg_events_map_help_page',
    'access arguments' => array('submit latitude/longitude'),
    'type' => MENU_NORMAL_ITEM,
  );

  return $items;
}

/**
 * Menu callback
 * Help page for event map.
 */
function sonybmg_events_map_help_page() {
  $output = t('Before moving this site to live, or if you are working locally, you will need to set up a Google Map API - get this key at <a href="@google-link">Google Map API website</a>. Configure this at <a href="@drupal-link">admin > settings > gmap</a>. ', array('@google-link' => 'http://www.google.com/apis/maps/', '@drupal-link' => url('admin/settings/gmap')));
  $output .= t('By default this site has been set up to geocode US addresses. Many other countries can be geocoded, you can configure this at <a href="@location-link">the location settings page</a>. ', array('@location-link' => url('admin/settings/location/geocoding')));
  $output .= t('There are two blocks that you may need to enable in the correct region - the overview event map (generated by a view, which <a href="@edit-link">you can edit</a>) and the node location block. Both can be configured in the normal block configuration page. ', array('@edit-link' => url('admin/build/views/edit/tour_map')));
  return $output;
}

 /**
 * Implementation of hook_views_api().
 */
function sonybmg_events_map_views_api() {
  return array(
    'api' => 2,
    'path' => drupal_get_path('module', 'sonybmg_events_map'),
  );
}